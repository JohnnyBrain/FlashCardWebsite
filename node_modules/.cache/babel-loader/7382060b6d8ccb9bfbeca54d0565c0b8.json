{"ast":null,"code":"var _require=require('express'),response=_require.response;var express=require('express');var fs=require('fs');var mysql=require('mysql');var Datastore=require('nedb');var app=express();app.listen(3000,function(){return console.log('working!');});app.use(express.static('src'));//makes server able to understand incoming data as json.\napp.use(express.json({limit:'1mb'}));//app.use(express.json({strict: false}));\nvar database=new Datastore('database.db');database.loadDatabase();function readDataFile(){var sendDeckList=[];/*return fs.readFileSync('Data.txt', function(err, data) {\n      if(err){\n        throw err;\n      }\n      var deckList = data.toString().split(\"\\n\");\n      for(i in deckList) {\n          //console.log(JSON.parse(deckList[i]).deckList[0].name);\n          var tempDeck = JSON.parse(deckList[i]).deckList;\n          for(i in tempDeck){\n            //var deckName = tempDeck[i].name;\n            var newDeck = new Deck(tempDeck[i].name);\n            var cardList = tempDeck[i].cardList;\n            for(i in cardList){\n              var newCard = new Card(cardList[i].front, cardList[i].back);\n              newDeck.addCard(newCard);\n            }\n            sendDeckList.push(newDeck);\n            //console.log(newDeck.getName());\n            //console.log(newDeck.getCardList());\n            //console.log(deckName);\n          }\n      }\n      //console.log(sendDeckList);\n      //return sendDeckList;\n  });*/ /*\n  return fs.readFileSync('Data.txt', function(err, data) {\n    if(err){\n      throw err;\n    }\n    var deckList = data.toString().split(\"\\n\");\n    for(i in deckList) {\n        //console.log(JSON.parse(deckList[i]).deckList[0].name);\n        var tempDeck = JSON.parse(deckList[i]).deckList;\n        for(i in tempDeck){\n          //var deckName = tempDeck[i].name;\n          sendDeckList.push([]);\n          sendDeckList[i].push(tempDeck[i].name);\n          var cardList = tempDeck[i].cardList;\n          for(i in cardList){\n            sendDeckList[i].push([cardList[i].front, cardList[i].back]);\n          }\n          //console.log(newDeck.getName());\n          //console.log(newDeck.getCardList());\n          //console.log(deckName);\n        }\n        \n    }\n    //return sendDeckList;\n  });\n  */ //console.log(sendDeckList);\n//return sendDeckList;\n}//connects the server to the client to recieve and send data. Request is what the client sends to the server, ie data. \n// the ressponse is what the server sends beck to the client, ie a confirmation upon recieving the data.\napp.post('/api',function(req,res){console.log(\"request recieved\");console.log(req.body);fs.appendFile('./Data.txt',JSON.stringify(/*req.body.time*/req.body)+\"\\n\",function(err){if(err){console.error(err);}// file written successfully\n});//what is being sent back to the client\nres.json({status:'success',DeckList:req.body});});/*\napp.post('/editDeckList', (req, res) => {\n  console.log(\"request recieved\");\n  console.log(req.body);\n  fs.writeFile('./Data.txt', JSON.stringify(/*req.body.time*/ /* req.body) + \"\\n\", err => {\n    if (err) {\n      console.error(err);\n    }\n    // file written successfully\n  });\n  //what is being sent back to the client\n  res.json({\n    status: 'success',\n    DeckList: req.body\n  });\n});\n*/app.post('/editDeckList',function(req,res){console.log(\"request recieved\");console.log(req.body);//database.insert(req.body);\n//database.insert(req.body[0].sendDeckList);\ndatabase.update({username:req.body.username,password:req.body.password},req.body);//what is being sent back to the client\nres.json({status:'success',DeckList:req.body});});/*\n//sends a response to the client.\napp.get('/getData', (req, res) => {\n    console.log(\"good\");\n    //res.send(\"high\");\n    var rtnList = readDataFile();\n    console.log(rtnList);\n    //rtnList = ['h', 'h'];\n    res.send(rtnList);\n});\n*/ //sends a response to the client.\napp.get('/getData',function(req,res){console.log(\"good\");//res.send(\"high\");\ndatabase.find({},function(err,data){if(err){console.log(err);}res.json(data);console.log(data[0].sendDeckList[0].name);});//console.log(rtnList);\n//rtnList = ['h', 'h'];\n//res.send(rtnList);\n});app.post('/login',function(req,res){console.log(\"good\");//res.send(\"high\");\ndatabase.find({username:req.body.username,password:req.body.password},function(err,data){if(data.length==0){console.log(\"err\");res.json({});}else{console.log(data);res.json(data);console.log(data[0].sendDeckList[0].name);console.log(req.body.username);}});//console.log(rtnList);\n//rtnList = ['h', 'h'];\n//res.send(rtnList);\n});app.post('/createAccount',function(req,res){database.insert(req.body);//what is being sent back to the client\nres.json({status:'success',DeckList:req.body});});//console.log(\"high\");\n/*\nconst fs = require('fs');\nconst content = 'Some content!';\n\nfs.writeFile('./Data.txt', content, err => {\n  if (err) {\n    console.error(err);\n  }\n  // file written successfully\n});\n*/ //const myURL = new URL('/foo', 'https://example.org/');\n//console.log('good');","map":{"version":3,"names":["require","response","express","fs","mysql","Datastore","app","listen","console","log","use","static","json","limit","database","loadDatabase","readDataFile","sendDeckList","post","req","res","body","appendFile","JSON","stringify","err","error","status","DeckList","update","username","password","get","find","data","name","length","insert"],"sources":["/Users/johnbrain/Projects/FlashCardProject/src/index.js"],"sourcesContent":["\n\nconst { response } = require('express');\nconst express = require('express');\nconst fs = require('fs');\nconst mysql = require('mysql');\nconst Datastore = require('nedb');\n\nconst app = express();\napp.listen(3000, () => console.log('working!'));\napp.use(express.static('src'));\n//makes server able to understand incoming data as json.\napp.use(express.json({limit: '1mb'}));\n//app.use(express.json({strict: false}));\nconst database = new Datastore('database.db');\ndatabase.loadDatabase();\n\nfunction readDataFile(){\n  var sendDeckList = [];\n  /*return fs.readFileSync('Data.txt', function(err, data) {\n      if(err){\n        throw err;\n      }\n      var deckList = data.toString().split(\"\\n\");\n      for(i in deckList) {\n          //console.log(JSON.parse(deckList[i]).deckList[0].name);\n          var tempDeck = JSON.parse(deckList[i]).deckList;\n          for(i in tempDeck){\n            //var deckName = tempDeck[i].name;\n            var newDeck = new Deck(tempDeck[i].name);\n            var cardList = tempDeck[i].cardList;\n            for(i in cardList){\n              var newCard = new Card(cardList[i].front, cardList[i].back);\n              newDeck.addCard(newCard);\n            }\n            sendDeckList.push(newDeck);\n            //console.log(newDeck.getName());\n            //console.log(newDeck.getCardList());\n            //console.log(deckName);\n          }\n      }\n      //console.log(sendDeckList);\n      //return sendDeckList;\n  });*/\n  /*\n  return fs.readFileSync('Data.txt', function(err, data) {\n    if(err){\n      throw err;\n    }\n    var deckList = data.toString().split(\"\\n\");\n    for(i in deckList) {\n        //console.log(JSON.parse(deckList[i]).deckList[0].name);\n        var tempDeck = JSON.parse(deckList[i]).deckList;\n        for(i in tempDeck){\n          //var deckName = tempDeck[i].name;\n          sendDeckList.push([]);\n          sendDeckList[i].push(tempDeck[i].name);\n          var cardList = tempDeck[i].cardList;\n          for(i in cardList){\n            sendDeckList[i].push([cardList[i].front, cardList[i].back]);\n          }\n          //console.log(newDeck.getName());\n          //console.log(newDeck.getCardList());\n          //console.log(deckName);\n        }\n        \n    }\n    //return sendDeckList;\n  });\n  */\n  //console.log(sendDeckList);\n  //return sendDeckList;\n}\n\n\n//connects the server to the client to recieve and send data. Request is what the client sends to the server, ie data. \n// the ressponse is what the server sends beck to the client, ie a confirmation upon recieving the data.\napp.post('/api', (req, res) => {\n  console.log(\"request recieved\");\n  console.log(req.body);\n  fs.appendFile('./Data.txt', JSON.stringify(/*req.body.time*/ req.body) + \"\\n\", err => {\n    if (err) {\n      console.error(err);\n    }\n    // file written successfully\n  });\n  //what is being sent back to the client\n  res.json({\n    status: 'success',\n    DeckList: req.body\n  });\n});\n\n/*\napp.post('/editDeckList', (req, res) => {\n  console.log(\"request recieved\");\n  console.log(req.body);\n  fs.writeFile('./Data.txt', JSON.stringify(/*req.body.time*//* req.body) + \"\\n\", err => {\n    if (err) {\n      console.error(err);\n    }\n    // file written successfully\n  });\n  //what is being sent back to the client\n  res.json({\n    status: 'success',\n    DeckList: req.body\n  });\n});\n*/\n\napp.post('/editDeckList', (req, res) => {\n  console.log(\"request recieved\");\n  console.log(req.body);\n  //database.insert(req.body);\n  //database.insert(req.body[0].sendDeckList);\n  database.update({username: req.body.username, password: req.body.password}, req.body);\n  //what is being sent back to the client\n  res.json({\n    status: 'success',\n    DeckList: req.body\n  });\n});\n\n/*\n//sends a response to the client.\napp.get('/getData', (req, res) => {\n    console.log(\"good\");\n    //res.send(\"high\");\n    var rtnList = readDataFile();\n    console.log(rtnList);\n    //rtnList = ['h', 'h'];\n    res.send(rtnList);\n});\n*/\n\n//sends a response to the client.\napp.get('/getData', (req, res) => {\n  console.log(\"good\");\n  //res.send(\"high\");\n  database.find({}, (err, data) => {\n    if(err){\n      console.log(err);\n    }\n    res.json(data);\n    console.log(data[0].sendDeckList[0].name);\n  });\n  //console.log(rtnList);\n  //rtnList = ['h', 'h'];\n  //res.send(rtnList);\n});\n\napp.post('/login', (req, res) => {\n  console.log(\"good\");\n  //res.send(\"high\");\n  database.find({username: req.body.username, password: req.body.password}, (err, data) => {\n    if(data.length == 0){\n      console.log(\"err\");\n      res.json({});\n    }\n    else{\n      console.log(data);\n      res.json(data);\n      console.log(data[0].sendDeckList[0].name);\n      console.log(req.body.username);\n    }\n  });\n  //console.log(rtnList);\n  //rtnList = ['h', 'h'];\n  //res.send(rtnList);\n});\n\napp.post('/createAccount', (req, res) => {\n  database.insert(req.body);\n  //what is being sent back to the client\n  res.json({\n    status: 'success',\n    DeckList: req.body\n  });\n})\n\n\n\n\n//console.log(\"high\");\n\n/*\nconst fs = require('fs');\nconst content = 'Some content!';\n\nfs.writeFile('./Data.txt', content, err => {\n  if (err) {\n    console.error(err);\n  }\n  // file written successfully\n});\n*/\n\n//const myURL = new URL('/foo', 'https://example.org/');\n\n//console.log('good');\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}